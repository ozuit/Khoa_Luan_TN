angular.module('hr_manager.directive',[]).directive('stringToNumber',function(){return{require:'ngModel',link:function(scope,element,attrs,ngModel){ngModel.$parsers.push(function(value){return''+value;});ngModel.$formatters.push(function(value){return parseFloat(value);});}};}).directive('bitToBoolean',function(){return{require:'ngModel',link:function(scope,element,attrs,ngModel){ngModel.$parsers.push(function(value){return''+value;});ngModel.$formatters.push(function(value){return(value=='1')?true:false;});}};}).directive('format',['$filter',function($filter){return{require:'?ngModel',link:function(scope,elem,attrs,ctrl){if(!ctrl)return;ctrl.$formatters.unshift(function(a){return $filter(attrs.format)(ctrl.$modelValue);});ctrl.$parsers.unshift(function(viewValue){var plainNumber=viewValue.replace(/[^\d|\-+|\.+]/g,'');elem.val($filter('number')(plainNumber));return plainNumber;});}};}]).directive('phoneInput',function($filter,$browser){return{require:'ngModel',link:function($scope,$element,$attrs,ngModelCtrl){var listener=function(){var value=$element.val().replace(/[^0-9]/g,'');$element.val($filter('tel')(value,false));};ngModelCtrl.$parsers.push(function(viewValue){return viewValue.replace(/[^0-9]/g,'').slice(0,10);});ngModelCtrl.$render=function(){$element.val($filter('tel')(ngModelCtrl.$viewValue,false));};$element.bind('change',listener);$element.bind('keydown',function(event){var key=event.keyCode;if(key==91||(15<key&&key<19)||(37<=key&&key<=40)){return;} $browser.defer(listener);});$element.bind('paste cut',function(){$browser.defer(listener);});}};}).filter('tel',function(){return function(tel){if(!tel){return'';} var value=tel.toString().trim().replace(/^\+/,'');if(value.match(/[^0-9]/)){return tel;} var country,city,number;switch(value.length){case 1:case 2:case 3:case 4:case 5:city=value;break;default:city=value.slice(0,5);number=value.slice(5);} if(number){if(number.length>5){number=number.slice(0,3)+'-'+number.slice(3,6);} else{number=number;} return("("+city+") "+number).trim();} else{return"("+city;}};}).directive('toggleImage',function(){return{scope:{value:'=',onUrl:'@',offUrl:'@'},link:link,restrict:'E',replace:true,template:'<div class="videocall-icon"><a href="" ng-click="toggle()"><img ng-src="{{ value ? onUrl : offUrl }}"></div>'}; function link(scope,element,attrs){scope.value=true;scope.toggle=toggle;function toggle(){scope.value=!scope.value;}}}).directive('ngEnter',function(){return function(scope,element,attrs){element.bind("keydown keypress",function(event){if(event.which===13){scope.$apply(function(){scope.$eval(attrs.ngEnter);});event.preventDefault();}});};});