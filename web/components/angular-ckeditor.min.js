!function(n,e){"function"==typeof define&&define.amd?define(["angular"],e):e(angular)}(this,function(n){function e(n){return{restrict:"A",require:["ckeditor","ngModel"],controller:["$scope","$element","$attrs","$parse","$q",t],link:function(e,t,o,a){var r=a[0],c=a[1];r.ready().then(function(){["dataReady","change","blur","saveSnapshot"].forEach(function(n){r.onCKEvent(n,function(){c.$setViewValue(r.instance.getData()||"")})}),r.instance.setReadOnly(!!o.readonly),o.$observe("readonly",function(n){r.instance.setReadOnly(!!n)}),i(function(){n(o.ready)(e)})}),c.$render=function(){r.ready().then(function(){r.instance.setData(c.$viewValue||"",{noSnapshot:!0,callback:function(){r.instance.fire("updateSnapshot")}})})}}}}function t(n,e,t,o,a){var r,c=o(t.ckeditor)(n)||{},u=e[0],s=a.defer();r=u.hasAttribute("contenteditable")&&"true"==u.getAttribute("contenteditable").toLowerCase()?this.instance=CKEDITOR.inline(u,c):this.instance=CKEDITOR.replace(u,c),this.onCKEvent=function(e,t){function o(){var n=arguments;i(function(){a.apply(null,n)})}function a(){var e=arguments;n.$apply(function(){t.apply(null,e)})}return r.on(e,o),function(){r.removeListener(e,a)}},this.onCKEvent("instanceReady",function(){s.resolve(!0)}),this.ready=function(){return s.promise},n.$on("$destroy",function(){s.promise.then(function(){r.destroy(!1)})})}n.module("ckeditor",[]).directive("ckeditor",["$parse",e]);var i=window&&window.setImmediate?window.setImmediate:function(n){setTimeout(n,0)}});