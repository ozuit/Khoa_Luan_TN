!function(n,i){"function"==typeof define&&define.amd?define(["angular","spinjs"],i):i(window.angular,window.Spinner)}(this,function(n,i){"use strict";function a(i){var o=!1,t=1;return"boolean"==typeof i&&(o=i,i=arguments[1]||{},t++),n.forEach([].slice.call(arguments,t),function(t){var d,e,s,r,l;for(r in t)l=i[r],s=t[r],i!==s&&(o&&s&&(n.isObject(s)||(d=n.isArray(s)))?(e=d?l&&n.isArray(l)?l:[]:l&&n.isObject(l)?l:{},i[r]=a(o,e,s)):void 0!==s&&(i[r]=s))}),i}n.module("darthwade.dwLoading",[]).value("dwLoadingOptions",{active:!1,text:"",className:"",overlay:!0,spinner:!0,spinnerOptions:{lines:12,length:7,width:4,radius:10,rotate:0,corners:1,color:"#000",direction:1,speed:2,trail:100,opacity:.25,fps:20,zIndex:2e9,className:"dw-spinner",top:"auto",left:"auto",position:"relative"}}).service("dwLoading",["$timeout","$rootScope","dwLoadingOptions",function(n,i,o){var t=this;t.setDefaultOptions=function(n){a(!0,o,n)},t.start=function(a){n(function(){i.$broadcast("$dwLoadingStart",a)})},t.finish=function(a){n(function(){i.$broadcast("$dwLoadingFinish",a)})}}]).factory("$loading",["dwLoading",function(n){return n}]).directive("dwLoading",["$rootScope","dwLoadingOptions",function(o,t){return{link:function(d,e,s){var r,l,c,u,p,f=null,w=s.dwLoading||!1,v=function(){l&&l.addClass("dw-loading-active"),f&&f.spin(u[0])},g=function(){l&&l.removeClass("dw-loading-active"),f&&f.stop()};d.$watch(s.dwLoadingOptions,function(o){g(),r=a(!0,{},t,o),c=n.element("<div></div>").addClass("dw-loading-body"),l=n.element("<div></div>").addClass("dw-loading").append(c),r.overlay&&l.addClass("dw-loading-overlay"),r.className&&l.addClass(r.className),r.spinner&&(u=n.element("<div></div>").addClass("dw-loading-spinner"),c.append(u),f=new i(r.spinnerOptions)),r.text&&(p=n.element("<div></div>").addClass("dw-loading-text").text(r.text),c.append(p)),e.append(l),!r.active&&w||v()},!0),o.$on("$dwLoadingStart",function(n,i){i===w&&v()}),o.$on("$dwLoadingFinish",function(n,i){i===w&&g()}),d.$on("$destroy",function(){g(),f=null})}}}])});